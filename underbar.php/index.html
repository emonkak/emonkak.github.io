<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <title>Underbar.php - an array utility like Underscore.js</title>
    <link href="css/screen.css" media="screen, projection" rel="stylesheet">
    <link href="css/print.css" media="print" rel="stylesheet">
  </head>
  <body>
    <header id="header">
      <h1><a href="#">Underbar.php</a><a href="#header" class="btn-nav">&#x2630;</a></h1>
      <nav id="navigation" role="navigation">
        <ul>
          <li><a href="#introduction">Introduction</a></li>
          <li><a href="#getting-started">Getting Started</a></li>
        </ul>
        <h2><a href="#collections">Collections<small>Array or traversable object</small></a></h2>
        <ul>
          <li><a href="#each">each</a></li>
          <li><a href="#map">map</a></li>
          <li><a href="#parMap">parMap</a></li>
          <li><a href="#reduce">reduce</a></li>
          <li><a href="#reduceRight">reduceRight</a></li>
          <li><a href="#find">find</a></li>
          <li><a href="#filter">filter</a></li>
          <li><a href="#where">where</a></li>
          <li><a href="#findWhere">findWhere</a></li>
          <li><a href="#reject">reject</a></li>
          <li><a href="#every">every</a></li>
          <li><a href="#all">all</a></li>
          <li><a href="#some">some</a></li>
          <li><a href="#any">any</a></li>
          <li><a href="#sum">sum</a></li>
          <li><a href="#product">product</a></li>
          <li><a href="#contains">contains</a></li>
          <li><a href="#invoke">invoke</a></li>
          <li><a href="#pluck">pluck</a></li>
          <li><a href="#max">max</a></li>
          <li><a href="#min">min</a></li>
          <li><a href="#sortBy">sortBy</a></li>
          <li><a href="#groupBy">groupBy</a></li>
          <li><a href="#countBy">countBy</a></li>
          <li><a href="#shuffle">shuffle</a></li>
          <li><a href="#toArray">toArray</a></li>
          <li><a href="#size">size</a></li>
          <li><a href="#span">span</a></li>
          <li><a href="#get">get</a></li>
          <li><a href="#memorize">memorize</a></li>
        </ul>
        <h2><a href="#arrays">Arrays<small>Numerical array</small></a></h2>
        <ul>
          <li><a href="#first">first</a></li>
          <li><a href="#first">first</a></li>
          <li><a href="#first">first</a></li>
          <li><a href="#first">first</a></li>
          <li><a href="#first">first</a></li>
          <li><a href="#first">first</a></li>
          <li><a href="#first">first</a></li>
          <li><a href="#first">first</a></li>
          <li><a href="#first">first</a></li>
          <li><a href="#first">first</a></li>
          <li><a href="#first">first</a></li>
          <li><a href="#first">first</a></li>
          <li><a href="#first">first</a></li>
          <li><a href="#first">first</a></li>
          <li><a href="#first">first</a></li>
          <li><a href="#first">first</a></li>
          <li><a href="#first">first</a></li>
          <li><a href="#first">first</a></li>
          <li><a href="#first">first</a></li>
          <li><a href="#first">first</a></li>
          <li><a href="#initial">initial</a></li>
          <li><a href="#last">last</a></li>
        </ul>
      </nav>
    </header>
    <article id="main" role="main">
      <header>
        <h1>Underbar.php</h1>
        <p>an array utility like Underscore.js</p>
        <p><a href="https://github.com/emonkak/underbar.php" class="btn">GitHub Repository</a></p>
      </header>
      <aside>
        <ul class="social-buttons">
          <li>
            <iframe src="http://ghbtns.com/github-btn.html?user=emonkak&amp;repo=underbar.php&amp;type=watch&amp;count=true" width="110" height="20" class="github-watch-button-frame"></iframe>
          </li>
          <li><a href="https://twitter.com/share" class="twitter-share-button">Tweet</a></li>
          <li><a href="http://b.hatena.ne.jp/entry/https://emonkak.github.io/underbar.php/" data-hatena-bookmark-layout="standard-balloon" class="hatena-bookmark-button"><img src="http://b.st-hatena.com/images/entry-button/button-only.gif" alt="このエントリーをはてなブックマークに追加" width="20" height="20"></a></li>
          <li>
            <div data-href="https://emonkak.github.io/underbar.php/" data-send="false" data-layout="button_count" data-width="450" data-show-faces="false" class="fb-like"></div>
          </li>
        </ul>
      </aside>
      <section id="introduction">
        <h2>Introduction</h2>
        <p>
          Underbar.phpは配列操作のための便利な関数群を提供する
          <a href="http://underscorejs.org/">Underscore.js</a>ライクなPHPのライブラリです。
        </p>
        <p>
          Underbar.phpはUnderscore.jsの移植ではなく配列操作に特化したライブラリで、
          Underscore.jsの関数操作の関数(<code>bind()</code>, <code>partical()</code>, etc...)や、
          オブジェクト判定系の関数(<code>isString()</code>, <code>isArray()</code>)などは実装されていません。
          他、PHP組み込みの関数と機能が重複しているものは実装していません。
        </p>
        <p>
          Underscore.jsとの最も大きな違いは遅延リスト(遅延ストリーム)が扱える点です。
          遅延リストとは要素の計算が遅延されるコンテナで、具体的なPHPの表現で言うと<code><a href="http://php.net/manual/ja/class.traversable.php">Traversable</a></code>インターフェイスを実装したオブジェクトを指します。
          遅延リストは要素が都度生成され余分な計算をしないことから、配列を生成するよりメモリ使用量を大きく抑えられることがあります。
        </p>
        <p>
          <code>map()</code>などの配列を返す関数のほとんどは、<code>Traversable</code>なオブジェクトを返すことが可能です。
          また、配列を引数に取るあらゆる関数は同時に<code>Traversable</code>なオブジェクトを取ることもできます。
        </p>
        <h5>map()を使った例</h5>
        <pre>use Underbar\Strict as S;  // 配列版
use Underbar\Lazy as L;  // 遅延リスト版
 
$xs = [1, 2, 3, 4];
$twice = function($n) { $n * 2 };
 
$ys = S::map($xs, $twice);
$zs = L::map($xs, $twice);
 
var_dump(is_array($ys));  // true
var_dump(is_array($zs));  // false
var_dump($ys instanceof Traversable);  // false
var_dump($zs instanceof Traversable);  // true
 
var_dump($ys);  // [2, 4, 6, 8]
var_dump(iterator_to_array($ys));  // [2, 4, 6, 8]</pre>
      </section>
      <section id="getting-started">
        <h2>Getting Started</h2>
        <p>
          Underbar.phpの動作にはバージョン5.3以上のPHP処理系と、<a href="http://getcomposer.org/">Composer</a>が必要になります。
          インストールが完了したらプロジェクトルートに以下のような内容のcomposer.jsonを作成します。
          詳しいcomposer.jsonの書き方については<a href="http://getcomposer.org/doc/04-schema.md">こちら</a>を参照して下さい。
        </p>
        <pre>{
    &quot;require&quot;: {
        &quot;emonkak/underbar.php&quot;: &quot;dev-master&quot;
    }
}</pre>
        <p>composer.jsonを作成したら同じディレクトリで<code>$ php composer.phar install</code>を実行するとUnderbar.phpのインストールは完了します。</p>
      </section>
      <section id="api">
        <h2>API</h2>
        <section id="collections">
          <h3>Collection Functions</h3>
          <!-- each {{{-->
          <section id="each">
            <h4 class="function"><em>void</em> each(<em>array</em> <var>$xs</var>, <em>callable</em> <var>$f</var>)</h4>
            <p>
              arrayの各要素に対して関数<var>$f</var>を呼び出します。
              <var>$f</var>は<code>(element, index, array)</code>の3つの引数を取ります。
            </p>
            <pre>&gt;&gt;&gt; _::each([1, 2, 3], function($x, $i, $xs) {
  echo $x, PHP_EOL;
})
=&gt; 1
=&gt; 2
=&gt; 3
&gt;&gt;&gt; _::each(['one' =&gt; 1, 'two' =&gt; 2, 'three' =&gt; 3], function($x, $k, $xs) {
  echo $k, $x, PHP_EOL;
})
=&gt; one1
=&gt; two2
=&gt; three3</pre>
            <div class="top"><a href="#">TOP</a></div>
          </section>
          <!-- }}}-->
          <!-- map {{{-->
          <section id="map">
            <h4 class="function lazy"><em>array</em> map(<em>array</em> <var>$xs</var>, <em>callable</em> <var>$f</var>)</h4>
            <p>
              Arrayの各要素に対して関数<var>$f</var>を適用して新しい配列を返します。
              <var>$f</var>は<code>(element, index, array)</code>の3つの引数を取ります。
            </p>
            <pre>&gt;&gt;&gt; _::map([1, 2, 3], function($x) {
  return $x * 3;
})
=&gt; [3, 6, 9]
&gt;&gt;&gt; _::map(['one' =&gt; 1, 'two' =&gt; 2, 'three' =&gt; 3], function($x) {
  return $x * 3;
})
=&gt; [3, 6, 9]</pre>
            <div class="top"><a href="#">TOP</a></div>
          </section>
          <!-- }}}-->
        </section>
        <section id="arrays">
          <h3>Array Functions</h3>
          <!-- first {{{-->
          <section id="first">
            <h4 class="function lazy"><em>array</em> first(<em>array</em> <var>$xs</var>)</h4>
            <h4 class="function"><em>mixed</em> first(<em>array</em> <var>$xs</var>, <em>int</em> <var>$n</var>)</h4>
            <ul class="aliases">
              <li><strong>head</strong></li>
              <li><strong>take</strong></li>
            </ul>
            <p>
              配列の最初の要素を返します。
              <var>$n</var>を指定した場合は先頭からn個分の要素を含む配列を返します。
            </p>
            <pre>&gt;&gt;&gt; _::first([1, 2, 3])
1
&gt;&gt;&gt; _::first([1, 2, 3], 1)
[1]
&gt;&gt;&gt; _::first([1, 2, 3], 2)
[1, 2]</pre>
            <div class="top"><a href="#">TOP</a></div>
          </section>
          <!-- }}}-->
        </section>
      </section>
    </article>
    <footer id="footer">
      <p>Developed by <a href="http://twitter.com/emonkak">@emonkak</a></p>
      <p>Licensed under the <a href="https://github.com/emonkak/underbar.php/blob/master/LICENSE">MIT License</a></p>
    </footer>
    <div id="fb-root"></div>
    <script src="http://b.st-hatena.com/js/bookmark_button.js" async="async"></script>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
    <script>
      (function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/ja_JP/all.js#xfbml=1";
        fjs.parentNode.insertBefore(js, fjs);
      }(document, 'script', 'facebook-jssdk'));
    </script>
  </body>
</html>