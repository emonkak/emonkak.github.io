<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <meta name="keywords" content="php,library,iterator,array,underscore.js">
    <meta name="description" content="an array and iterator utility, like Underscore.js">
    <title>Underbar.php - An array and iterator utility, like Underscore.js</title>
    <link href="css/styles.css" rel="stylesheet">
    <script src="//b.st-hatena.com/js/bookmark_button.js" async></script>
  </head>
  <body>
    <header id="header">
      <nav role="navigation">
        <div class="title"><a href="#logo"><strong>Underbar.php</strong><small>Version 1.0.0</small></a><a href="#header" class="button-menu">&#x2630;</a></div>
        <dl>
          <dd><a href="#introduction">Introduction</a></dd>
          <dd><a href="#getting-started">Getting Started</a></dd>
          <dt class="title"><a href="#classes"><strong>Classes</strong><small>Underbar namespace</small></a></dt>
          <dd><a href="#Strict">Strict</a></dd>
          <dd><a href="#Lazy">Lazy</a></dd>
          <dd><a href="#LazyIterator">LazyIterator</a></dd>
          <dd><a href="#LazyGenerator">LazyGenerator</a></dd>
          <dd><a href="#LazySafeGenerator">LazySafeGenerator</a></dd>
          <dd><a href="#Enumerable">Enumerable</a></dd>
          <dt class="title"><a href="#collections"><strong>Collection Functions</strong><small>For array or traversable object</small></a></dt>
          <dd><a href="#each">each</a></dd>
          <dd><a href="#map">map</a></dd>
          <dd><a href="#reduce">reduce</a></dd>
          <dd><a href="#reduceRight">reduceRight</a></dd>
          <dd><a href="#scanl">scanl</a></dd>
          <dd><a href="#scanr">scanr</a></dd>
          <dd><a href="#find">find</a></dd>
          <dd><a href="#filter">filter</a></dd>
          <dd><a href="#where">where</a></dd>
          <dd><a href="#findWhere">findWhere</a></dd>
          <dd><a href="#reject">reject</a></dd>
          <dd><a href="#every">every</a></dd>
          <dd><a href="#some">some</a></dd>
          <dd><a href="#contains">contains</a></dd>
          <dd><a href="#invoke">invoke</a></dd>
          <dd><a href="#pluck">pluck</a></dd>
          <dd><a href="#max">max</a></dd>
          <dd><a href="#min">min</a></dd>
          <dd><a href="#sum">sum</a></dd>
          <dd><a href="#product">product</a></dd>
          <dd><a href="#sortBy">sortBy</a></dd>
          <dd><a href="#groupBy">groupBy</a></dd>
          <dd><a href="#countBy">countBy</a></dd>
          <dd><a href="#shuffle">shuffle</a></dd>
          <dd><a href="#toArray">toArray</a></dd>
          <dd><a href="#memoize">memoize</a></dd>
          <dd><a href="#size">size</a></dd>
          <dt class="title"><a href="#arrays"><strong>Array Functions</strong><small>For numerical array</small></a></dt>
          <dd><a href="#first">first</a></dd>
          <dd><a href="#takeWhile">takeWhile</a></dd>
          <dd><a href="#initial">initial</a></dd>
          <dd><a href="#last">last</a></dd>
          <dd><a href="#rest">rest</a></dd>
          <dd><a href="#dropWhile">dropWhile</a></dd>
          <dd><a href="#span">span</a></dd>
          <dd><a href="#compact">compact</a></dd>
          <dd><a href="#flatten">flatten</a></dd>
          <dd><a href="#without">without</a></dd>
          <dd><a href="#union">union</a></dd>
          <dd><a href="#intersection">intersection</a></dd>
          <dd><a href="#difference">difference</a></dd>
          <dd><a href="#uniq">uniq</a></dd>
          <dd><a href="#unique">unique</a></dd>
          <dd><a href="#zip">zip</a></dd>
          <dd><a href="#zipWith">zipWith</a></dd>
          <dd><a href="#unzip">unzip</a></dd>
          <dd><a href="#object">object</a></dd>
          <dd><a href="#indexOf">indexOf</a></dd>
          <dd><a href="#lastIndexOf">lastIndexOf</a></dd>
          <dd><a href="#sortedIndex">sortedIndex</a></dd>
          <dd><a href="#range">range</a></dd>
          <dd><a href="#cycle">cycle</a></dd>
          <dd><a href="#repeat">repeat</a></dd>
          <dd><a href="#iterate">iterate</a></dd>
          <dd><a href="#parMap">parMap</a></dd>
          <dd><a href="#pop">pop</a></dd>
          <dd><a href="#push">push</a></dd>
          <dd><a href="#reverse">reverse</a></dd>
          <dd><a href="#shift">shift</a></dd>
          <dd><a href="#sort">sort</a></dd>
          <dd><a href="#splice">splice</a></dd>
          <dd><a href="#unshift">unshift</a></dd>
          <dd><a href="#concat">concat</a></dd>
          <dd><a href="#join">join</a></dd>
          <dd><a href="#slice">slice</a></dd>
        </dl>
      </nav>
    </header>
    <article id="main" role="main">
      <header id="logo">
        <h1>Underbar.php</h1>
        <p>An array and iterator utility, like Underscore.js</p>
        <p><a href="https://github.com/emonkak/underbar.php" class="button">GitHub Repository</a></p>
      </header>
      <ul class="social-buttons">
        <li>
          <iframe src="http://ghbtns.com/github-btn.html?user=emonkak&amp;repo=underbar.php&amp;type=watch&amp;count=true" width="110" height="20" class="github-watch-button-frame"></iframe>
        </li>
        <li><a href="https://twitter.com/share" class="twitter-share-button">Tweet</a></li>
        <li><a href="http://b.hatena.ne.jp/entry/https://emonkak.github.io/underbar.php/" data-hatena-bookmark-layout="standard-balloon" class="hatena-bookmark-button"><img src="http://b.st-hatena.com/images/entry-button/button-only.gif" alt="このエントリーをはてなブックマークに追加" width="20" height="20"></a></li>
      </ul>
      <section id="introduction"><h2>Introduction</h2>
<p>Underbar.phpは<a href="http://underscorejs.org/">Underscore.js</a>のような便利なユーティリティを提供するPHPのライブラリです。
Underscore.jsのPHPへの移植としては既に<a href="http://brianhaveri.github.io/Underscore.php/">Undersocore.php</a>がありますが、Underbar.phpは配列とIteratorに関する操作に特化しています。</p>
<h3>Features</h3>
<ul>
<li><a href="http://php.net/manual/ja/class.iterator.php">Iterator</a>による遅延リスト(遅延ストリーム)のサポート</li>
<li><a href="http://php.net/manual/ja/class.traversable.php">Traversable</a>なクラスにメソッドを追加する<a href="#Enumerable"><code>Enumerable</code></a>トレイト</li>
<li>underscore.jsにはない関数をいくつか追加<ul>
<li><em>Collections</em>: <a href="#parMap"><code>parMap()</code></a>, <a href="#scanl"><code>scanl()</code></a>, <a href="#scanr"><code>scanr()</code></a>, <a href="#span"><code>span()</code></a>, <a href="#memoize"><code>memoize()</code></a></li>
<li><em>Arrays</em>: <a href="#takeWhile"><code>takeWhile()</code></a>, <a href="#dropWhile"><code>dropWhile()</code></a>, <a href="#cycle"><code>cycle()</code></a>, <a href="#repeat"><code>repeat()</code></a>, <a href="#iterate"><code>iterate()</code></a></li>
<li><em>Objects</em>: <a href="#isTraversable"><code>isTraversable()</code></a></li>
</ul>
</li>
</ul>
<h3>Example</h3>
<p>以下は配列の要素を2倍にして新しい配列を返す例です。</p>
<pre><code class="language-php">use Underbar\Strict as _;  // Array version class

$xs = _::map([1, 2, 3, 4], function($n) { return $n * 2; });
var_dump(is_array($xs));  // true
var_dump($xs);  // [2, 4, 6, 8]</code></pre>
<p>これをIteratorを返すように書き換えてみます。</p>
<pre><code class="language-php">use Underbar\Lazy as _;  // Iterator version class

$xs = _::map([1, 2, 3, 4], function($n) { return $n * 2; });
var_dump($xs instanceof Traversable);  // true
var_dump(iterator_to_array($xs));  // [2, 4, 6, 8]</code></pre>
<p>このように配列版(<a href="#Strict"><code>Strict</code></a>)とIterator版(<a href="#Lazy"><code>Lazy</code></a>)のクラスは互換性のあるインターフェイスを持っているので容易に切り替えることができます。</p>
<p>Underscore.jsのように<a href="#chain"><code>chain()</code></a>を使ってメソッドチェインで処理を書くこともできます。</p>
<pre><code class="language-php">use Underbar\Lazy as _;

// Fibonacci sequence
echo _::chain([1, 1])
    -&gt;iterate(function($pair) { return [$pair[1], _::sum($pair)]; })
    -&gt;map(function($pair) { return $pair[0]; })
    -&gt;take(10)
    -&gt;join()
    -&gt;value();  // 1,1,2,3,5,8,13,21,34,55</code></pre>

        <p class="top"><a href="#">TOP</a></p>
      </section>
      <section id="getting-started"><h2>Getting Started</h2>
<p>Underbar.phpの動作には<em>バージョン5.3以上</em>のPHP処理系と、<a href="http://getcomposer.org/">Composer</a>が必要です。
インストールが完了したらプロジェクトルートに以下のような内容のcomposer.jsonを作成して下さい。
詳しいcomposer.jsonの書き方については<a href="http://getcomposer.org/doc/04-schema.md">こちら</a>を参照して下さい。</p>
<pre><code class="language-javascript">{
    &quot;require&quot;: {
        &quot;emonkak/underbar.php&quot;: &quot;dev-master&quot;
    }
}</code></pre>
<p>composer.jsonを作成したら同じディレクトリで</p>
<pre><code>$ php composer.phar install</code></pre>
<p>を実行するとUnderbar.phpのインストールは完了です。</p>

        <p class="top"><a href="#">TOP</a></p>
      </section>
      <section id="classes"><h2>Classes</h2>
<p>Underbar.phpで利用可能なクラスの一覧です。</p>

        <section id="Underbar">
          <h3>Underbar Namespace</h3>
          <!-- Strict {{{-->
          <article id="Strict">
            <h4 class="api">Strict <small>Class</small><a href="https://github.com/emonkak/underbar.php/blob/master/src/Underbar/Strict.php" class="source">Source</a></h4><p>配列版を返すAPIを提供するクラスです。
Underbar.phpのコアとなるクラスで、すべての関数はこのクラスのstaticメソッドとして定義されています。
Iteratorを返すAPIを提供する<a href="#class-LazyIterator"><code>LazyIterator</code></a>と<a href="#class-LazyGenerator"><code>LazyGenerator</code></a>はこのクラスを継承しています。</p>

            <p class="top"><a href="#">TOP</a></p>
          </article>
          <!-- }}}-->
          <!-- Lazy  {{{-->
          <article id="Lazy">
            <h4 class="api lazy">Lazy <small>Alias</small><a href="https://github.com/emonkak/underbar.php/blob/master/src/Underbar/Lazy.php" class="source">Source</a></h4><p>Iteratorを返すAPIを提供するクラスへのエイリアスです。
<a href="http://php.net/manual/ja/class.generator.php"><code>Generator</code></a>が利用可能であれば<a href="#LazyGenerator"><code>LazyGenerator</code></a>を、利用できなければ<a href="#LazyIterator"><code>LazyIterator</code></a>を参照します。</p>
<p>オートローダーでロードされる前に同名のエイリアスを定義することで、
定義を上書きすることもできます。</p>
<pre><code class="language-php">class_alias(&#39;Underbar\\LazySafeGenerator&#39;, &#39;Underbar\\Lazy&#39;);</code></pre>

            <p class="top"><a href="#">TOP</a></p>
          </article>
          <!-- }}}-->
          <!-- LazyIterator  {{{-->
          <article id="LazyIterator">
            <h4 class="api lazy">LazyIterator <small>Class</small><a href="https://github.com/emonkak/underbar.php/blob/master/src/Underbar/LazyIterator.php" class="source">Source</a></h4>
            <ol class="extends">
              <li><code><a href="#Strict">Strict</a></code></li>
              <li><code><em>LazyIterator</em></code></li>
            </ol><p><a href="http://php.net/manual/ja/class.iterator.php"><code>Iterator</code></a>を返すAPIを提供するクラスです。</p>

            <p class="top"><a href="#">TOP</a></p>
          </article>
          <!-- }}}-->
          <!-- LazyGenerator  {{{-->
          <article id="LazyGenerator">
            <h4 class="api lazy">LazyGenerator <small>Class</small><a href="https://github.com/emonkak/underbar.php/blob/master/src/Underbar/LazyGenerator.php" class="source">Source</a></h4>
            <ol class="extends">
              <li><code><a href="#Strict">Strict</a></code></li>
              <li><code><em>LazyGenerator</em></code></li>
            </ol><p><a href="http://php.net/manual/ja/class.generator.php"><code>Generator</code></a>を返すAPIを提供するクラスです。
<code>Generator</code>は巻き戻せない<code>Iterator</code>なので、2回目の走査で例外が発生することに注意して下さい。</p>
<pre><code class="language-php">use Underbar\LazyGenerator as _;

$xs = _::range(10);
foreach ($xs as $x);
// &#39;Exception&#39; with message &#39;Cannot traverse an already closed generator&#39;
foreach ($xs as $x);</code></pre>
<p><code>Generator</code>を巻き戻したい場合は<a href="#LazySafeGenerator"><code>LazySafeGenerator</code></a>が利用できます。</p>

            <p class="top"><a href="#">TOP</a></p>
          </article>
          <!-- }}}-->
          <!-- LazySafeGenerator  {{{-->
          <article id="LazySafeGenerator">
            <h4 class="api lazy">LazySafeGenerator <small>Class</small><a href="https://github.com/emonkak/underbar.php/blob/master/src/Underbar/LazyUnsafeGenerator.php" class="source">Source</a></h4>
            <ol class="extends">
              <li><code><a href="#Strict">Strict</a></code></li>
              <li><code><a href="#LazyGenerator">LazyGenerator</a></code></li>
              <li><code><em>LazyGenerator</em></code></li>
            </ol><p><a href="http://php.net/manual/ja/class.generator.php"><code>Generator</code></a>を返すAPIを提供するクラスです。
<code>Generator</code>は走査を繰り返すと例外が発生しますが、このクラスのAPIは<code>Generator</code>を<code>RewindableGenerator</code>でラップして反復可能にしています。</p>

            <p class="top"><a href="#">TOP</a></p>
          </article>
          <!-- }}}-->
          <!-- Enumerable  {{{-->
          <article id="Enumerable">
            <h4 class="api lazy">Enumerable <small>Trait</small><a href="https://github.com/emonkak/underbar.php/blob/master/src/Underbar/Enumerable.php" class="source">Source</a></h4>
            <p class="top"><a href="#">TOP</a></p>
          </article>
          <!-- }}}-->
        </section>
      </section>
      <section id="functions"><h2>Functions</h2>
<p><a href="#Strict"><code>Strict</code></a>、<a href="#Lazy"><code>Lazy</code></a>、<a href="#LazyIterator"><code>LazyIterator</code></a>、<a href="#LazyGenerator"><code>LazyGenerator</code></a>、<a href="#LazySafeGenerator"><code>LazySafeGenerator</code></a>クラスで利用可能な関数の一覧です。
<strong>色付き</strong>のマーカーで示される関数はLazy系のクラスで利用できます。</p>

        <section id="collections">
          <h3>Collection Functions</h3>
          <!-- each()  {{{-->
          <article id="each">
            <h4 class="api"><em>void</em> each(<em>array</em> <var>$xs</var>, <em>callable</em> <var>$f</var>)</h4><p><em>array</em>の各要素に対して関数<code>$f</code>を呼び出します。
<code>$f</code>は<code>(element, key, array)</code>の3つの引数を取ります。</p>
<pre><code class="language-php">_::each([1, 2, 3], function($x, $k, $xs) {
    // 1, 2, 3を順番に出力
    echo $x, PHP_EOL;
});
$xs = [&#39;one&#39; =&gt; 1, &#39;two&#39; =&gt; 2, &#39;three&#39; =&gt; 3];
_::each($xs, function($x, $k, $xs) {
    // one-1, two-2, three-3を順番に出力
    echo $k, &#39;-&#39;, $x, PHP_EOL;
});</code></pre>

            <p class="top"><a href="#">TOP</a></p>
          </article>
          <!-- }}}-->
          <!-- map()  {{{-->
          <article id="map">
            <h4 class="api"><em>array</em> map(<em>array</em> <var>$xs</var>, <em>callable</em> <var>$f</var>)</h4>
            <h4 class="api lazy"><em>Iterator</em> map(<em>array</em> <var>$xs</var>, <em>callable</em> <var>$f</var>)</h4><p><code>$xs</code>の各要素に対して関数<code>$f</code>を適用します。
<code>$f</code>は<code>(element, key, array)</code>の3つの引数を取ります。</p>
<pre><code class="language-php">_::map([1, 2, 3], function($x) {
    return $x * 3;
});
// =&gt; [3, 6, 9]
_::map([&#39;one&#39; =&gt; 1, &#39;two&#39; =&gt; 2, &#39;three&#39; =&gt; 3], function($x) {
    return $x * 3;
});
// =&gt; [3, 6, 9]</code></pre>

            <p class="top"><a href="#">TOP</a></p>
          </article>
          <!-- }}}-->
          <!-- reduce()  {{{-->
          <article id="reduce">
            <h4 class="api"><em>mixed</em> reduce(<em>array</em> <var>$xs</var>, <em>callable</em> <var>$f</var>, <em>mixed</em> <var>$acc</var>)</h4>
            <ul class="aliases">
              <li><code>inject()</code></li>
              <li><code>foldl()</code></li>
            </ul><p>左結合で<code>$xs</code>の要素の畳み込んだ結果を返します。
<code>$f</code>は<code>($acc, $value, $key, $xs)</code>の4つの引数を取ります。</p>
<pre><code class="language-php">$sum = _::reduce([1, 2, 3], function($acc, $n) {
    return $acc + $n;
}, 0);
// =&gt; 6</code></pre>

            <p class="top"><a href="#">TOP</a></p>
          </article>
          <!-- }}}-->
          <!-- reduceRight()  {{{-->
          <article id="reduceRight">
            <h4 class="api"><em>mixed</em> reduceRight(<em>array</em> <var>$xs</var>, <em>callable</em> <var>$f</var>, <em>mixed</em> <var>$acc</var>)</h4>
            <ul class="aliases">
              <li><code>foldr()</code></li>
            </ul><p>右結合で<code>$xs</code>の要素の畳み込んだ結果を返します。
<code>$f</code>は<code>($acc, $value, $key, $xs)</code>の4つの引数を取ります。</p>
<pre><code class="language-php">$xss = [[0, 1], [2, 3], [4, 5]];
$flat = _::reduceRight($xss, function($acc, $xs) {
    return array_merge($acc, $xs);
}, []);
// =&gt; [4, 5, 2, 3, 0, 1]</code></pre>

            <p class="top"><a href="#">TOP</a></p>
          </article>
          <!-- }}}-->
          <!-- scanl()  {{{-->
          <article id="scanl">
            <h4 class="api"><em>array</em> scanl(<em>array</em> <var>$xs</var>, <em>callable</em> <var>$f</var>, <em>mixed</em> <var>$acc</var>)</h4>
            <h4 class="api lazy"><em>Iterator</em> scanl(<em>array</em> <var>$xs</var>, <em>callable</em> <var>$f</var>, <em>mixed</em> <var>$acc</var>)</h4><p>Haskellの<a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v:scanl"><code>scanl</code></a>からの移植です。
<code>$xs</code>の要素を<code>$f</code>によって左結合で畳み込む過程を配列として返します。
<code>$f</code>は<code>($acc, $value, $key, $xs)</code>の4つの引数を取ります。</p>
<pre><code class="language-php">_::scanl(_::range(0, 10), function($acc, $n) {
  return $acc + $n;
}, 0);
// =&gt; [0, 1, 3, 6, 10, 15, 21, 28, 36, 45]</code></pre>

            <p class="top"><a href="#">TOP</a></p>
          </article>
          <!-- }}}-->
          <!-- scanr()  {{{-->
          <article id="scanr">
            <h4 class="api"><em>array</em> scanr(<em>array</em> <var>$xs</var>, <em>callable</em> <var>$f</var>, <em>mixed</em> <var>$acc</var>)</h4>
            <h4 class="api lazy"><em>Iterator</em> scanr(<em>array</em> <var>$xs</var>, <em>callable</em> <var>$f</var>, <em>mixed</em> <var>$acc</var>)</h4><p>Haskellの<a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v:scanr"><code>scanr</code></a>からの移植です。
<code>$xs</code>の要素を<code>$f</code>によって右結合で畳み込む過程を配列として返します。
<code>$f</code>は<code>($acc, $value, $key, $xs)</code>の4つの引数を取ります。</p>
<pre><code class="language-php">_::scanl(_::range(0, 10), function($acc, $n) {
  return $acc + $n;
}, 0);
// [0, 1, 3, 6, 10, 15, 21, 28, 36, 45]</code></pre>

            <p class="top"><a href="#">TOP</a></p>
          </article>
          <!-- }}}-->
          <!-- find()  {{{-->
          <article id="find">
            <h4 class="api"><em>mixed</em> find(<em>array</em> <var>$xs</var>, <em>callable</em> <var>$f</var>)</h4>
            <ul class="aliases">
              <li><code>detect()</code></li>
            </ul><p><code>$xs</code>の要素の中から<code>$f</code>が最初に<code>true</code>を返す要素を返します。
見付からなかった場合は<code>null</code>を返します。</p>
<pre><code class="language-php">$even = _::find([1, 2, 3, 4, 5, 6], function($n) {
    return $n % 2 === 0;
});
// =&gt; 2</code></pre>

            <p class="top"><a href="#">TOP</a></p>
          </article>
          <!-- }}}-->
          <!-- filter()  {{{-->
          <article id="filter">
            <h4 class="api"><em>array</em> filter(<em>array</em> <var>$xs</var>, <em>callable</em> <var>$f</var>)</h4>
            <h4 class="api lazy"><em>Iterator</em> filter(<em>array</em> <var>$xs</var>, <em>callable</em> <var>$f</var>)</h4>
            <ul class="aliases">
              <li><code>select()</code></li>
            </ul><p><code>$xs</code>の要素について<code>$f</code>が<code>true</code>を返すものを選択します。
逆の操作を行う関数として<a href="#reject"><code>reject()</code></a>があります。</p>
<pre><code class="language-php">$evens = _::filter([1, 2, 3, 4, 5, 6], function($n) {
    return $n % 2 === 0;
});
// =&gt; [2, 4, 6]</code></pre>

            <p class="top"><a href="#">TOP</a></p>
          </article>
          <!-- }}}-->
          <!-- where()  {{{-->
          <article id="where">
            <h4 class="api"><em>array</em> where(<em>array</em> <var>$xs</var>, <em>array</em> <var>$properties</var>)</h4>
            <h4 class="api lazy"><em>Iterator</em> where(<em>array</em> <var>$xs</var>, <em>array</em> <var>$properties</var>)</h4><p><code>$xs</code>の要素から<code>$properties</code>のキーと値のペアに一致するものを選択します。</p>
<pre><code class="language-php">$members = [
    [&#39;name&#39; =&gt; &#39;Yui Ogura&#39;, &#39;sex&#39; =&gt; &#39;female&#39;, &#39;age&#39; =&gt; 17],
    [&#39;name&#39; =&gt; &#39;Rina Hidaka&#39;, &#39;sex&#39; =&gt; &#39;female&#39;, &#39;age&#39; =&gt; 19],
    [&#39;name&#39; =&gt; &#39;Yuka Iguchi&#39;, &#39;sex&#39; =&gt; &#39;female&#39;, &#39;age&#39; =&gt; 24],
    [&#39;name&#39; =&gt; &#39;Yoko Hikasa&#39;, &#39;sex&#39; =&gt; &#39;female&#39;, &#39;age&#39; =&gt; 27],
    [&#39;name&#39; =&gt; &#39;Kana Hanazawa&#39;, &#39;sex&#39; =&gt; &#39;female&#39;, &#39;age&#39; =&gt; 24]
];
_::where($members, [&#39;sex&#39; =&gt; &#39;female&#39;, &#39;age&#39; =&gt; 24]);
// =&gt; [[&quot;name&quot; =&gt; &quot;Yuka Iguchi&quot;, &quot;sex&quot; =&gt; &quot;female&quot;, &quot;age&quot; =&gt; 24],
//     [&quot;name&quot; =&gt; &quot;Kana Hanazawa&quot;, &quot;sex&quot; =&gt; &quot;female&quot;, &quot;age&quot; =&gt; 24]]</code></pre>

            <p class="top"><a href="#">TOP</a></p>
          </article>
          <!-- }}}-->
          <!-- findWhere()  {{{-->
          <article id="findWhere">
            <h4 class="api"><em>mixed</em> findWhere(<em>array</em> <var>$xs</var>, <em>array</em> <var>$properties</var>)</h4><p><code>$xs</code>の要素から<code>$properties</code>のキーと値のペアに最初に一致するものを返します。
見付からない場合は<code>null</code>を返します。</p>
<pre><code class="language-php">$members = [
    [&#39;name&#39; =&gt; &#39;Yukari Tamura&#39;, &#39;sex&#39; =&gt; &#39;female&#39;, &#39;age&#39; =&gt; 17],
    [&#39;name&#39; =&gt; &#39;Chinatsu Akasaki&#39;, &#39;sex&#39; =&gt; &#39;female&#39;],
    [&#39;name&#39; =&gt; &#39;Ai Kayano&#39;, &#39;sex&#39; =&gt; &#39;female&#39;, &#39;age&#39; =&gt; 25]
];
_::findWhere($members, [&#39;sex&#39; =&gt; &#39;female&#39;, &#39;age&#39; =&gt; 17]);
// =&gt; [&quot;name&quot; =&gt; &quot;Yukari Tamura&quot;, &quot;sex&quot; =&gt; &quot;female&quot;, &quot;age&quot; =&gt; 17]</code></pre>

            <p class="top"><a href="#">TOP</a></p>
          </article>
          <!-- }}}-->
          <!-- reject()  {{{-->
          <article id="reject">
            <h4 class="api"><em>array</em> reject(<em>array</em> <var>$xs</var>, <em>callable</em> <var>$f</var>)</h4>
            <h4 class="api lazy"><em>Iterator</em> reject(<em>array</em> <var>$xs</var>, <em>callable</em> <var>$f</var>)</h4><p><code>$xs</code>の要素について<code>$f</code>が<code>true</code>を返すものを除外します。
逆の操作を行う関数として<a href="#filter"><code>filter()</code></a>があります。</p>
<pre><code class="language-php">$evens = _::filter([1, 2, 3, 4, 5, 6], function($n) {
    return $n % 2 === 0;
});
// =&gt; [1, 3, 5]</code></pre>

            <p class="top"><a href="#">TOP</a></p>
          </article>
          <!-- }}}-->
          <!-- every()  {{{-->
          <article id="every">
            <h4 class="api"><em>bool</em> every(<em>array</em> <var>$xs</var>, [<em>callable|string</em> <var>$f = null</var>])</h4>
            <ul class="aliases">
              <li><code>all()</code></li>
            </ul><p><code>$xs</code>の要素がすべて<code>true</code>として評価される値であれば<code>true</code>を返します。</p>
<pre><code class="language-php">_::every([true, 1, null, &#39;yes&#39;]);
// =&gt; false</code></pre>

            <p class="top"><a href="#">TOP</a></p>
          </article>
          <!-- }}}-->
          <!-- some()  {{{-->
          <article id="some">
            <h4 class="api"><em>bool</em> some(<em>array</em> <var>$xs</var>, [<em>callable|string</em> <var>$f = null</var>])</h4>
            <ul class="aliases">
              <li><code>any()</code></li>
            </ul><p><code>$xs</code>の要素の中に<code>true</code>として評価される値が1つでもあれば<code>true</code>を返します。</p>
<pre><code class="language-php">_::some([true, 1, null, &#39;yes&#39;]);
// =&gt; true</code></pre>

            <p class="top"><a href="#">TOP</a></p>
          </article>
          <!-- }}}-->
          <!-- contains()  {{{-->
          <article id="contains">
            <h4 class="api"><em>bool</em> contains(<em>array</em> <var>$xs</var>, <em>mixed</em> <var>$target</var>)</h4><p><code>$xs</code>の要素に<code>$target</code>が含まれていれば<code>true</code>を返します。
比較は<code>==</code>演算子を使って行われます。</p>
<pre><code class="language-php">_::contains([1, 2, 3], 3);
// =&gt; true</code></pre>

            <p class="top"><a href="#">TOP</a></p>
          </article>
          <!-- }}}-->
          <!-- invoke()  {{{-->
          <article id="invoke">
            <h4 class="api"><em>array</em> invoke(<em>array</em> <var>$xs</var>, <em>string</em> <var>$method</var>, [<em>mixed</em> <var>$argments...</var>])</h4>
            <h4 class="api lazy"><em>Iterator</em> invoke(<em>array</em> <var>$xs</var>, <em>string</em> <var>$method</var>, [<em>mixed</em> <var>$argments...</var>])</h4><p><code>$xs</code>の要素をオブジェクトを見なして指定した<code>$method</code>を呼び出します。</p>
<pre><code class="language-php">$xs = [new DateTime(&#39;2000-01-01&#39;), new DateTime(&#39;2013-01-01&#39;)];
_::invoke($xs, &#39;format&#39;, &#39;Y-m-d H:i:s&#39;);
// =&gt; [&quot;2000-01-01 00:00:00&quot;,
//     &quot;2013-01-01 00:00:00&quot;]</code></pre>

            <p class="top"><a href="#">TOP</a></p>
          </article>
          <!-- }}}-->
          <!-- pluck()  {{{-->
          <article id="pluck">
            <h4 class="api"><em>array</em> pluck(<em>array</em> <var>$xs</var>, <em>string</em> <var>$property</var>)</h4>
            <h4 class="api lazy"><em>Iterator</em> pluck(<em>array</em> <var>$xs</var>, <em>string</em> <var>$property</var>)</h4><p><code>$xs</code>の要素の中から指定した<code>$property</code>の値を抽出します。</p>
<pre><code class="language-php">$stooges = [
    [&#39;name&#39; =&gt; &#39;moe&#39;, &#39;age&#39; =&gt; 40],
    [&#39;name&#39; =&gt; &#39;larry&#39;, &#39;age&#39; =&gt; 50],
    [&#39;name&#39; =&gt; &#39;curly&#39;, &#39;age&#39; =&gt; 60]
];
_::pluck($stooges, &#39;name&#39;);
// =&gt; [&quot;moe&quot;, &quot;larry&quot;, &quot;curly&quot;]</code></pre>

            <p class="top"><a href="#">TOP</a></p>
          </article>
          <!-- }}}-->
          <!-- max()  {{{-->
          <article id="max">
            <h4 class="api"><em>int</em> max(<em>array</em> <var>$xs</var>)</h4>
            <h4 class="api"><em>mixed</em> max(<em>array</em> <var>$xs</var>, <em>callable|string</em> <var>$f</var>)</h4><p><code>$xs</code>の要素の中の<em>最大</em>の値を返します。
<code>$f</code>に関数を指定した場合は、その関数を適用した結果を基準にして最大の値を返します。
<code>$f</code>に文字列を指定した場合は、該当のプロパティを基準にします。
<code>$xs</code>が空の時は<code>-INF</code>を返します。</p>
<pre><code class="language-php">$stooges = [
    [&#39;name&#39; =&gt; &#39;moe&#39;, &#39;age&#39; =&gt; 40],
    [&#39;name&#39; =&gt; &#39;larry&#39;, &#39;age&#39; =&gt; 50],
    [&#39;name&#39; =&gt; &#39;curly&#39;, &#39;age&#39; =&gt; 60]
];
_::max($stooges, &#39;age&#39;);
// =&gt; [&quot;name&quot; =&gt; &quot;curly&quot;, &quot;age&quot; =&gt; 60]</code></pre>

            <p class="top"><a href="#">TOP</a></p>
          </article>
          <!-- }}}-->
          <!-- min()  {{{-->
          <article id="min">
            <h4 class="api"><em>int</em> min(<em>array</em> <var>$xs</var>)</h4>
            <h4 class="api"><em>mixed</em> min(<em>array</em> <var>$xs</var>, <em>callable|string</em> <var>$f</var>)</h4><p><code>$xs</code>の要素の中の<em>最小</em>の値を返します。
<code>$f</code>に関数を指定した場合は、その関数を適用した結果を基準にして最小の値を返します。
<code>$f</code>に文字列を指定した場合は、該当のプロパティを基準にします。
<code>$xs</code>が空の時は<code>INF</code>を返します。</p>
<pre><code class="language-php">$stooges = [
    [&#39;name&#39; =&gt; &#39;moe&#39;, &#39;age&#39; =&gt; 40],
    [&#39;name&#39; =&gt; &#39;larry&#39;, &#39;age&#39; =&gt; 50],
    [&#39;name&#39; =&gt; &#39;curly&#39;, &#39;age&#39; =&gt; 60]
];
_::min($stooges, &#39;age&#39;);
// =&gt; [&quot;name&quot; =&gt; &quot;moe&quot;, &quot;age&quot; =&gt; 40]</code></pre>

            <p class="top"><a href="#">TOP</a></p>
          </article>
          <!-- }}}-->
          <!-- sum()  {{{-->
          <article id="sum">
            <h4 class="api"><em>int</em> sum(<em>array</em> <var>$xs</var>)</h4><p><code>$xs</code>の要素の合計を返します。</p>
<pre><code class="language-php">_::sum([0, 1, 2, 3, 4, 5]);
// =&gt; 15</code></pre>

            <p class="top"><a href="#">TOP</a></p>
          </article>
          <!-- }}}-->
          <!-- product()  {{{-->
          <article id="product">
            <h4 class="api"><em>int</em> product(<em>array</em> <var>$xs</var>)</h4><p><code>$xs</code>の要素の積を返します。</p>
<pre><code class="language-php">_::product([0, 1, 2, 3, 4, 5]);
// =&gt; 120</code></pre>

            <p class="top"><a href="#">TOP</a></p>
          </article>
          <!-- }}}-->
          <!-- sortBy()  {{{-->
          <article id="sortBy">
            <h4 class="api"><em>array</em> sortBy(<em>array</em> <var>$xs</var>, <em>callable|string</em> <var>$f</var>)</h4>
            <h4 class="api lazy"><em>Iterator</em> sortBy(<em>array</em> <var>$xs</var>, <em>callable|string</em> <var>$f</var>)</h4><p><code>$xs</code>を比較関数<code>$f</code>を使ってソートします。
<code>$f</code>に文字列を指定した場合は該当するプロパティを基準にします。
比較関数は事前にすべての要素に対して計算するのでO(n)のオーターです。</p>
<p><code>Iterator</code>を返す場合はソート後の値を取り出す操作(<code>pluck()</code>)だけが遅延されます。
ソート操作自体は遅延されません。</p>
<pre><code class="language-php">_::sortBy([1, 2, 3, 4, 5, 6], function($n) { return sin($n); });
// =&gt; [5, 4, 6, 3, 1, 2]</code></pre>

            <p class="top"><a href="#">TOP</a></p>
          </article>
          <!-- }}}-->
          <!-- groupBy()  {{{-->
          <article id="groupBy">
            <h4 class="api"><em>array</em> groupBy(<em>array</em> <var>$xs</var>, <em>callable|string</em> <var>$f</var>)</h4>
            <h4 class="api lazy"><em>Iterator</em> groupBy(<em>array</em> <var>$xs</var>, <em>callable|string</em> <var>$f</var>, [<em>bool</em> <var>$isSorted = false</var>])</h4><p><code>$xs</code>の要素を<code>$f</code>を呼び出した結果を基準にグループ化します。
<code>$f</code>に文字列を指定した場合は該当するプロパティを基準にします。
グループ化の基準にするキーでソートされていることが保証されているなら、
<code>$isSorted</code>を<code>true</code>にすることで<code>Iterator</code>を返すことができます。</p>
<pre><code class="language-php">_::groupBy([1.3, 2.1, 2.4], function($n) { return floor($n); });
// =&gt; [1 =&gt; [1.3], 2 =&gt; [2.1, 2.4]]</code></pre>

            <p class="top"><a href="#">TOP</a></p>
          </article>
          <!-- }}}-->
          <!-- countBy()  {{{-->
          <article id="countBy">
            <h4 class="api"><em>array</em> countBy(<em>array</em> <var>$xs</var>, <em>callable|string</em> <var>$f</var>)</h4>
            <h4 class="api lazy"><em>Iterator</em> countBy(<em>array</em> <var>$xs</var>, <em>callable|string</em> <var>$f</var>, [<em>bool</em> <var>$isSorted = false</var>])</h4><p><code>$xs</code>の要素を<code>$f</code>を呼び出した結果を基準にカウントします。
<code>$f</code>に文字列を指定した場合は該当するプロパティを基準にします。
カウントの基準にするキーでソートされていることが保証されているなら、
<code>$isSorted</code>を<code>true</code>にすることで<code>Iterator</code>を返すことができます。</p>
<pre><code class="language-php">_::countBy([1, 2, 3, 4, 5], function($n) {
  return $n % 2 === 0 ? &#39;even&#39; : &#39;odd&#39;;
});
// =&gt; [&quot;odd&quot; =&gt; 3, &quot;even&quot; =&gt; 2]</code></pre>

            <p class="top"><a href="#">TOP</a></p>
          </article>
          <!-- }}}-->
          <!-- shuffle()  {{{-->
          <article id="shuffle">
            <h4 class="api"><em>array</em> shuffle(<em>array</em> <var>$xs</var>)</h4><p><code>$xs</code>の要素をシャッフルします。
内部でPHP組込みの<a href="http://php.net/manual/ja/function.shuffle.php"><code>shuffle()</code></a>を利用しています。</p>
<pre><code class="language-php">_::shuffle([1, 2, 3, 4, 5, 6]);
// =&gt; [4, 1, 6, 3, 5, 2]</code></pre>

            <p class="top"><a href="#">TOP</a></p>
          </article>
          <!-- }}}-->
          <!-- toArray()  {{{-->
          <article id="toArray">
            <h4 class="api"><em>array</em> toArray(<em>mixed</em> <var>$xs</var>)</h4><p>指定した値をキーを維持した連想配列にします。</p>
<pre><code class="language-php">_::toArray(new ArrayObject([&#39;a&#39; =&gt; 1, &#39;b&#39; =&gt; 2, &#39;c&#39; =&gt; 3]));
// =&gt; [&quot;a&quot; =&gt; 1, &quot;b&quot; =&gt; 2, &quot;c&quot; =&gt; 3]</code></pre>

            <p class="top"><a href="#">TOP</a></p>
          </article>
          <!-- }}}-->
          <!-- toList()  {{{-->
          <article id="toList">
            <h4 class="api"><em>array</em> toList(<em>mixed</em> <var>$xs</var>)</h4><p>指定した値をキーが数値の配列にします。</p>
<pre><code class="language-php">_::toArray(new ArrayObject([&#39;a&#39; =&gt; 1, &#39;b&#39; =&gt; 2, &#39;c&#39; =&gt; 3]));
// =&gt; [1, 2, 3]</code></pre>

            <p class="top"><a href="#">TOP</a></p>
          </article>
          <!-- }}}-->
          <!-- memoize()  {{{-->
          <article id="memoize">
            <h4 class="api"><em>Iterator</em> memoize(<em>Iterator</em> <var>$xs</var>)</h4><p><code>$xs</code>を一度計算した要素をキャッシュする<code>MemoizeIterator</code>でラップします。
これを利用して<code>Generator</code>を反復可能にすることもできます。</p>
<pre><code class="language-php">$fibs = _::chain(array(0, 1))
    -&gt;iterate(function($pair) {
        return array($pair[1], $pair[0] + $pair[1]);
    })
    -&gt;map(function($pair) { return $pair[0]; })
    -&gt;memoize()
    -&gt;value();
$fibs[10];  // =&gt; 55</code></pre>

            <p class="top"><a href="#">TOP</a></p>
          </article>
          <!-- }}}-->
          <!-- size()  {{{-->
          <article id="size">
            <h4 class="api"><em>int</em> size(<em>mixed</em> <var>$xs</var>)</h4><p><code>$xs</code>のサイズを返します。</p>
<pre><code class="language-php">_::size([&quot;one&quot; =&gt; 1, &quot;two&quot; =&gt; 2, &quot;three&quot; =&gt; 3]);
// =&gt; 3</code></pre>

            <p class="top"><a href="#">TOP</a></p>
          </article>
          <!-- }}}-->
        </section>
        <section id="arrays">
          <h3>Array Functions</h3>
          <!-- first()  {{{-->
          <article id="first">
            <h4 class="api lazy"><em>array</em> first(<em>array</em> <var>$xs</var>)</h4>
            <h4 class="api"><em>mixed</em> first(<em>array</em> <var>$xs</var>, <em>int</em> <var>$n</var>)</h4>
            <ul class="aliases">
              <li><code>head()</code></li>
              <li><code>take()</code></li>
            </ul><p><code>$xs</code>の最初の要素を返します。
<code>$n</code>を指定した場合は先頭からn個分の要素を含む配列を返します。</p>
<pre><code class="language-php">_::first([1, 2, 3]);
// 1
_::first([1, 2, 3], 1);
// [1]
_::first([1, 2, 3], 2);
// [1, 2]</code></pre>

            <p class="top"><a href="#">TOP</a></p>
          </article>
          <!-- }}}-->
          <!-- parMap()  {{{-->
          <article id="parMap">
            <h4 class="api"><em>Internal\Parallel</em> parMap(<em>array</em> <var>$xs</var>, <em>callable</em> <var>$f</var>, <em>int</em> <var>$n = 4</var>)</h4><p><a href="#map"><code>map()</code></a>の並列実行版です。
<code>$xs</code>の各要素に対して関数<code>$f</code>を並列に適用する<a href="http://php.net/manual/ja/class.iterator.php"><code>Iterator</code></a>を返します。
<code>$f</code>は引数<code>(element)</code>を1つだけ取る関数です。
<code>$n</code>は同時に起動するワーカープロセスの数です。</p>
<p><code>$n</code>が2以上の時は複数のワーカープロセスによって処理されるため、返ってくる要素の順序は不定です。</p>
<pre><code class="language-php">$xs =_::parMap([1, 2, 3], function($x) {
    sleep(2);
    return $x * 3;
});
// デフォルトは4並列で実行されるので約2秒ですべての計算が終わります。
foreach ($xs as $x) {
    var_dump($x);  // 3, 6, 9が順不同に出力されます
}</code></pre>

            <p class="top"><a href="#">TOP</a></p>
          </article>
          <!-- }}}-->
          <!-- span()  {{{-->
          <article id="span">
            <h4 class="api"><em>array</em> span(<em>array</em> <var>$xs</var>, <em>callable</em> <var>$f</var>)</h4><p>Haskellの<a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v:span"><code>span</code></a>からの移植です。
<code>$xs</code>の要素に対して<code>$f</code>が最後に<code>false</code>を返す要素までと、それ以降の要素に分割します。
<code>span($xs, $f)</code>は<code>[takeWhile($xs, $f), dropWhile($xs, $f)]</code>と等価な操作です。</p>
<pre><code class="language-php">list ($xs, $ys) = _::span([1, 2, 3, 4, 1, 2, 3, 4], function($x) {
  return $x &lt; 3;
}, 0);
// =&gt; [[1, 2], [3, 4, 1, 2, 3, 4]]</code></pre>

            <p class="top"><a href="#">TOP</a></p>
          </article>
          <!-- }}}-->
        </section>
      </section>
      <footer id="footer">
        <p>Developed by <a href="http://twitter.com/emonkak">@emonkak</a></p>
        <p>Licensed under the <a href="https://github.com/emonkak/underbar.php/blob/master/LICENSE">MIT License</a></p>
      </footer>
    </article>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/lodash.js/1.2.1/lodash.min.js"></script>
    <script src="js/prism.js"></script>
    <script src="js/core.js"></script>
    <script>
      !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-41380289-1', 'emonkak.github.io');
      ga('send', 'pageview');
    </script>
  </body>
</html>